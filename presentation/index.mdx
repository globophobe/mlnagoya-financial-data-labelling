import { Layout, Image, Appear, Fit, Fill, Heading, Link, Table, TableHeader, TableHeaderItem, TableBody, TableRow, TableItem, Text, S } from 'spectacle';
import { DarkSlide, CodeSlide } from './slides';
import arex from '../assets/arex.jpg';
import cover from '../assets/cover.jpg';
import coverJapanese from '../assets/cover-japanese.jpg';
import marcos from '../assets/marcos.jpg';
import bitcoin from '../assets/bitcoin.png';
import fixedHorizon from '../assets/fixed-horizon.png';
import tripleBarrier from '../assets/triple-barrier.png';
import cusum from '../assets/cusum.png';
import volatility from '../assets/volatility.png';
import buySide from '../assets/buy-side.png';
import sellSide from '../assets/sell-side.png';
import primaryCM from '../assets/primary-confusion-matrix.png';
import secondaryCM from '../assets/secondary-confusion-matrix.png';
import monkeyThrowDarts from '../assets/monkey-throw-darts.png';

<Heading style={{ marginBottom: 0 }}>
  Labelling Financial Data
  <br />
  <span style={{ fontSize: "8.5vmin" }}>
    財務データのラベル付け
  </span>
</Heading> 
<Appear>
  <Heading size={2} style={{ color: "#737373" }}>
    with bonus Amazon Forecast.
  </Heading> 
</Appear>

---

# These slides are at Connpass. So you can check them out.
## スライドはConnpassにアップされています。 是非みてください。

---

# Who am I?
## お前誰?

---

# My name is Alex, and I'm from Canada 🇨🇦
## アレックスで、カナダから来ました。

---

<Layout>
  <Fill style={{ margin: "auto" }}>
    <Heading size={3}>My username on Connpass is "globophobe".</Heading>
    <Heading size={4}>Connpassのユーザ名は「globophobe」です。</Heading>
  </Fill>
  <Fill>
    <Image style={{ borderRadius: "35px", marginLeft: "1em" }} src={arex} />
  </Fill>
</Layout>

---

# I make stuff with Python, Django, Vue.js and React Native. 
## PythonやDjangoやVue.jsやReact Nativeでプログラミングしています。

---

# This is just for fun.
## これはただの楽しみです。

---

<Layout>
  <Fill style={{ margin: "auto" }}>
    <Heading>Recently, I have been reading this book.</Heading>
    <Heading size={2}>最近この本を読んでいます。</Heading>
  </Fill>
  <Fill>
    <Link href="https://www.amazon.co.jp/Advances-Financial-Machine-Learning-Marcos/dp/1119482089/">
      <Image style={{ height: "95vh", borderRadius: "10px", marginLeft: "1.5em" }} src={cover} />
    </Link>
  </Fill>
</Layout>

---

<Layout>
  <Fill style={{ margin: "auto" }}>
    <Heading>Currently, it is published in Japanese.</Heading>
    <Heading size={2}>現在、日本語で出版されています。</Heading>
  </Fill>
  <Fill>
      <Link href="https://www.amazon.co.jp/%E3%83%95%E3%82%A1%E3%82%A4%E3%83%8A%E3%83%B3%E3%82%B9%E6%A9%9F%E6%A2%B0%E5%AD%A6%E7%BF%92-%E3%83%9E%E3%83%AB%E3%82%B3%E3%82%B9%E3%83%BB%E3%83%AD%E3%83%9A%E3%82%B9%E3%83%BB%E3%83%87%E3%83%BB%E3%83%97%E3%83%A9%E3%83%89/dp/4322134637/">
      <Image style={{ height: "95vh", borderRadius: "10px", marginLeft: "1.5em" }} src={coverJapanese} />
    </Link>
  </Fill>
</Layout>

---

<Layout>
  <Fill style={{ margin: "auto" }}>
    <Heading size={5}>
      The author Marcos Lopez de Prado was named <Link href="https://jpm.pm-research.com/quant-of-2019">Quant of 2019</Link> by the <Link href="https://jpm.pm-research.com/">Journal of Portfolio Management</Link>.
    </Heading>
    <Heading size={6}>JPMにより「クォント オブ ザ イヤー」に選ばれました。</Heading>
  </Fill>
  <Fill>
    <Image style={{ height: "65vmin", borderRadius: "35px", marginLeft: "1em" }} src={marcos} />
  </Fill>
</Layout>

---

# According to Lopez de Prado, "One day in the near future, ML will dominate finance...
## 「近い将来、MLが金融を支配して...

---

# ...science will curtail guessing, and investing will not mean gambling."
## 科学は推測を削減するはずで、近く将来には、投資をする事はもうギャンブルの意味もしません。

---

# In Chapter 2, volume-based sampling was discussed.
## 第2章では、ボリュームベースのサンプリングについて説明されていました。

---

# Volume-based sampling results in data that is closer to independent and identically distributed (IID) normal.
## ボリュームベースのサンプリングにより、独立した同一分布（IID）正規に近いデータが得られます。

---

# However, raw transaction data is necessary for volume-based sampling.
## しかし、ボリュームベースのサンプリングには生のトランザクションデータが必要です。

---

# Usually, such data is very expensive.
## 通常、そのようなデータは非常に高価です。

---

<Layout>
  <Fill style={{ margin: "auto" }}>
    <Heading size={2}>
      However, it is provided free by some Bitcoin exchanges.
    </Heading>
    <Heading size={3}>
      しかし、ビットコインの取引所では無料で提供されています。
    </Heading>
  </Fill>
  <Fill>
    <Image style={{ borderRadius: "35px", marginTop: "50%", marginBottom: "-50%", marginLeft: "0.75em" }} src={bitcoin} />
  </Fill>
</Layout>

---

# My preference is data for the Bitmex XBTUSD perpetual future contract.
## 私はBitmexのXBTUSDの永続的な先物契約のデータにしました。

---

# In Chapter 3, labelling financial data is discussed.
## 第3章では財務データのラベル付けについて説明されています。

---

# Most quantitative methods use fixed time horizon labeling methods.
## ほとんどの定量的方法は、固定時間範囲ラベル付け方法を使用します。 

---

# The label is determined when price touches the vertical barrier.
## ラベルは、価格が垂直障壁にタッチすると決定されます。

---

<Image style={{ height: "80vh" }} src={fixedHorizon} />

---

# Lopez de Prado identifies two problems with such labels.
# そのようなラベルに関する2つの問題あります。
---

# 1) Time-horizon is fixed, but volatility is not.
## 期間が固定されていますが、ボラティリティは固定されていません。

---

# 2) The realities of trading require both stop loss and take profit thresholds.
## 取引の現実には、ストップロスと利潤の閾値の両方が必要です。

---

# Lopez de Prado describes a "triple-barrier" labelling method.
## 「トリプルバリア」て言う金融データラベル付けについてが説明されています。

---

<Image style={{ height: "80vh" }} src={tripleBarrier} />

---

# The vertical barrier is the same as fixed-horizon labelling.
## 垂直バリアは、固定水平ラベル付けと同じです。

---

# The upper and lower barriers are initial take profit or stop loss thresholds.
## 上限と下限の障壁は、最小の利潤またはストップロスのしきい値です。

---

## Lopez de Prado recommends calculating the upper and lower barriers with a point estimation of volatility... 
### ボラティリティのポイント推定を計算して、そしてのポイント推定で上バリアと下バリアの障壁を計算する事が勧められています。

---

# ...which is the mean of the exponentially weighted moving standard deviation of returns.
## ...ポイント推定はリターンの指数加重移動標準偏差の平均です。

---

# Returns being defined as the percent change in price between time T and T - 1.
## 戻り値は時間TとT-1の間の価格の変化率として定義されています。

---

# As per the following function:
## 次の関数で計算します：

---

export default CodeSlide

```python
def get_volatility(prices, span=100, delta=pd.Timedelta(hours=24)):
    """Estimate volatality with exponentially weighted moving standard deviation of returns."""
    df = prices.index.searchsorted(prices.index - delta)
    df = df[df > 0]
    df = pd.Series(
        prices.index[df - 1], 
        index=prices.index[prices.shape[0] - df.shape[0]:]
    )
    diff = prices.loc[df.values].values - 1
    df = prices.loc[df.index] / diff
    df = df.ewm(span=span).std()
    return df
```

---

#### The exponentially weighted moving standard deviation of returns:
#### リターンの指数加重移動標準偏差：

<Image style={{ height: "50vmin" }} src={volatility} />

---

# The mean of which becomes the threshold for the following function:
## その平均が次の関数のしきい値になります。

---

export default CodeSlide

```python
def cusum_filter(prices, threshold):
    events, pos, neg = [], 0, 0
    diff = prices.diff()
    for idx in diff.index[1:]:
        pos = max(0, pos + diff.loc[idx])
        neg = min(0, neg + diff.loc[idx])
        if neg < -threshold:
            neg = 0; events.append(idx)
        elif pos > threshold:
            pos = 0; events.append(idx)
    return pd.DatetimeIndex(events)
```

---

# The *cusum_filter* reduces the price series to only data points greater or less than the threshold.
## *cusum_filter* は、価格系列をしきい値よりも大きいまたは小さいポイントのみに減らします。

---

## The *cusum_filter* is described as an "[improvement] over many popular financial indicators such as Bollinger bands... 
## * cusum_filter *は人気のある市場信号「ボリンジャーバンド」とかに対する[改善]として説明されています。

---

# ...as it resets at each sample, so as to not to fluctuate over a threshold.
## 各サンプルでリセットされます。このように、しきい値の近くを超えて変動しないです。

---

# The time of the first touch, to either upper, lower, or vertical barrier is calculated. 
## 上部、下部、または垂直バリアへの最初のタッチの時間が計算されます。

---

## These are some "triple-barrier" touches.
<Heading size={2} style={{ marginBottom: "0.5em" }}>「トリプルバリア」タッチです。</Heading>

<Table>
  <TableHeader>
    <TableHeaderItem style={{ fontSize: "5.5vmin" }}>timestamp</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "5.5vmin" }}>target</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "5.5vmin" }}>touch</TableHeaderItem>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableItem style={{ fontSize: "3.5vmin" }}>2017-03-22 13:58:33.411609</TableItem>
      <TableItem style={{ fontSize: "3.5vmin" }}>0.0662078</TableItem>
      <TableItem style={{ fontSize: "3.5vmin" }}>2017-03-23 14:14:25.540570</TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "3.5vmin" }}>2017-07-21 02:25:36.397497</TableItem>
      <TableItem style={{ fontSize: "3.5vmin" }}>0.0168957</TableItem>
      <TableItem style={{ fontSize: "3.5vmin" }}>2017-07-21 03:04:44.531031</TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "3.5vmin" }}>2018-12-17 12:12:43.155227</TableItem>
      <TableItem style={{ fontSize: "3.5vmin" }}>0.0141053</TableItem>
      <TableItem style={{ fontSize: "3.5vmin" }}>2018-12-17 12:12:57.062203</TableItem>
    </TableRow>
  </TableBody>
</Table>

---

## The touches are indexed with the original dataframe to become labels.
## タッチは元のデータフレームでインデックス付けされ、ラベルになります。

<Table>
  <TableHeader>
    <TableHeaderItem style={{ fontSize: "5.5vmin" }}>timestamp</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "5.5vmin" }}>target</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "5.5vmin" }}>return</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "5.5vmin" }}>label</TableHeaderItem>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableItem style={{ fontSize: "4.5vmin" }}>2017-03-22 13:58:33.411609</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.066208</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.019608</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}><strong>0</strong></TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "4.5vmin" }}>2017-07-21 02:25:36.397497</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.016896</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>-0.018248</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}><strong>-1</strong></TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "4.5vmin" }}>2018-12-17 12:12:43.155227</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.014105</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.015244</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}><strong>1</strong></TableItem>
    </TableRow>
  </TableBody>
</Table>

---

## *Label 0* return was less than target when the vertical barrier, the max-holding period, was touched.
## *ラベル 0 * 最大保有期間である垂直障壁に触れたときのリターンは目標を下回っていました。

<Table>
  <TableHeader>
    <TableHeaderItem style={{ fontSize: "5.5vmin" }}>timestamp</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "5.5vmin" }}>target</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "5.5vmin" }}>return</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "5.5vmin" }}>label</TableHeaderItem>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableItem style={{ fontSize: "4.75vmin" }}>2017-03-22 13:58:33.411609</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}>0.066208</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}>0.019608</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}><strong>0</strong></TableItem>
    </TableRow>
  </TableBody>
</Table>

---

## *Label -1* return was negative when the lower barrier, stop-loss, was touched.
## *ラベル -1 * 下の障壁であるストップロスに触れた時のリターンは負でした。

<Table>
  <TableHeader>
    <TableHeaderItem style={{ fontSize: "5.5vmin" }}>timestamp</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "5.5vmin" }}>target</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "5.5vmin" }}>return</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "5.5vmin" }}>label</TableHeaderItem>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableItem style={{ fontSize: "4.75vmin" }}>2017-07-21 02:25:36.397497</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}>0.016896</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}>-0.018248</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}><strong>-1</strong></TableItem>
    </TableRow>
  </TableBody>
</Table>

---

## *Label 1* return was greater than target when the upper barrier, initial take-profit, was touched.
## *ラベル 1 * 上の障壁である最小の利潤に触れた時のリターンはは目標を上回りました。

<Table>
  <TableHeader>
    <TableHeaderItem style={{ fontSize: "5.5vmin" }}>timestamp</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "5.5vmin" }}>target</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "5.5vmin" }}>return</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "5.5vmin" }}>label</TableHeaderItem>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableItem style={{ fontSize: "4.75vmin" }}>2018-12-17 12:12:43.155227</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}>0.014105</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}>0.015244</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}><strong>1</strong></TableItem>
    </TableRow>
  </TableBody>
</Table>

---

# *Label 1* and *Label -1* indicate a trading opportunity.
## *ラベル 1* または *ラベル -1* は、取引の機会があるの意味します。

---

# Buy low and sell high.
## 安値で購入、高値で販売。

<Image style={{ height: "60vh" }} src={buySide} />

---

# Sell high and buy low.
## 高値で売り、低値で買います。

<Image style={{ height: "60vh" }} src={sellSide} />

---

# Selling high and buying low implies selling short on margin.
## 証拠金で空売りの取引を意味します。持っていないものを売る。

---

# For example, using ¥100,000 as margin (collateral) to sell ¥1,000,000.
## たとえば、100,000円をマージン（担保）として使用して、1,000,000円を販売します。

---

# *Label 0*, suggests not enough volatility for trading to be worthwhile.
## *ラベル 0*、 取引に値するボラティリティが十分でない事を示しています。

---

# Lopez de Prado also discusses "meta-labelling".
## 「メタラベル」て言う事はも説明さられています。

---

# Output from a primary model become input for a secondary model.
## プライマリモデルの質力予測は、セカンダリモデルの入力になります。

---

# Lopez de Prado says meta-labelling can be particulary useful...
## 「メタラベル」が特に有用のは...

---

# ...when outcomes are asymmetric, as it can help avoid large drawdowns.
## ...結果は非対称時です。大きいな損失を回避する事を助けるんからです。

---

# The primary model should have high recall, many true positives, and as few false positives as possible. 
## プライマリモデルは、高い再現率しべきで、多くの真の陽性ようで、出来るだけ誤検知がすくないようです。

---

# The secondary model filters the false positives from the primary model.
## セカンダリモデルは、プライマリモデルからの誤検出をフィルタリングします。

---

# The following is a simplified example:
## 次は単純化したの例です：

---

### Data is close price and volume, XBTUSD $10000000 volume bars:
#### データはXBTUSDの終値とボリューム、$10000000のボリュームバー：

<Table>
  <TableHeader>
    <TableHeaderItem style={{ fontSize: "5.5vmin" }}>timestamp</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "5.5vmin" }}>close</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "5.5vmin" }}>volume</TableHeaderItem>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableItem style={{ fontSize: "5vmin" }}>2020-01-14 18:13:02.951683</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>8858.5</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>10001522</TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "5vmin" }}>2020-01-15 01:07:18.109534</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>8730.0</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>10000005</TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "5vmin" }}>2020-01-15 04:06:15.848101</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>8651.0</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>10000340</TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "5vmin" }}>2020-01-15 13:57:39.592160</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>8878.0</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>10000444</TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "4.5vmin" }}>2020-01-15 16:03:29.038104</TableItem>
      <TableItem style={{ fontSize: "4.5vmin" }}>8725.5</TableItem>
      <TableItem style={{ fontSize: "4.5vmin" }}>10145705</TableItem>
    </TableRow>
  </TableBody>
</Table>

---

export default CodeSlide


```python
from sklearn.linear_model import LogisticRegression
```

```python
# Split train and test data.
split = int(len(df) * .7)
x = df[["close", "volume"]].values
y = df[["label"]].values
x_train, y_train = x[:split], y[:split]
x_test, y_test = x[split:], y[:split]
```

```python
# Resample using SMOTE, and fit.
x_train_res, y_train_res = SMOTE().fit_sample(x_train, y_train)
primary_model = LogisticRegression().fit(x_train_res, y_train_res)
y_pred = primary_model.predict(x_test)
```

---

export default CodeSlide

```python
def true_meta_labels(y_pred, y_test):
    """Labels were 0, 1, and -1. Correctly predicted labels of 1 or -1 will be 1."""
    bin_label = np.zeros_like(y_pred)
    for i in range(y_pred.shape[0]):
        if y_pred[i] != 0 and (y_pred[i] * y_test[i]) > 0:
            bin_label[i] = 1  # True Positive
    return bin_label
```

```python
true_binary = true_binary_label(y_pred, y_test)
cm = confusion_matrix(true_binary, y_pred != 0)
```

---

### Primary model: 

<Text><S type="bold">859 false positives (FP)</S></Text>
<Text><S type="bold">0 false negatives (FN)</S></Text>

<Image style={{ height: "65vh", marginTop: "0.5em" }} src={primaryCM} />

---

# Add predictions from primary model to training data of the secondary model.
## プライマリモデルの予測をセカンダリモデルのトレーニングデータに追加します。

---

export default CodeSlide

```python
# Predictions added as feature to secondary model.
y_train_pred = primary_model.predict(x_train) 
x_train_meta = np.hstack([y_train_pred[:, None], x_train])
x_test_meta = np.hstack([y_pred[:, None], x_test])
y_train_meta = true_meta_labels(y_train_pred, y_train)
```

```python
# Resample using SMOTE, and fit.
x_train_meta_res, y_train_meta_res = SMOTE().fit_sample(
    x_train_meta, y_train_meta
)
secondary_model = LogisticRegression().fit(
    x_train_meta_res, y_train_meta_res
)
y_pred_meta = secondary_model.predict(x_test_meta)
```

---

# Secondary model: 

<Text><S type="bold">472 false positives (FP)</S></Text>
<Text><S type="bold">132 false negatives (FN)</S></Text>

<Image style={{ height: "65vh", marginTop: "0.5em" }} src={secondaryCM} />

---

# Meta-labelling reduces number of false positives assymetrically to an increase in number of false negatives.
## メタラベルは、 偽陽性の数が偽陰性の数の増え非対称的に減ります。	

---

# Classification report, primary model:

<Table>
  <TableHeader>
    <TableHeaderItem />
    <TableHeaderItem style={{ fontSize: "5vmin" }}>precision</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "5vmin" }}>recall</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "5vmin" }}>f1-score</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "5vmin" }}>support</TableHeaderItem>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableItem>&nbsp;</TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "5vmin" }}>0.0</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>1.00</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.52</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}><strong>0.69</strong></TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>1756</TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "5vmin" }}>1.0</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.32</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>1.00</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}><strong>0.48</strong></TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>392</TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "5vmin" }}>&nbsp;</TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "5vmin" }}>accuracy</TableItem>
      <TableItem />
      <TableItem />
      <TableItem style={{ fontSize: "5vmin" }}>0.61</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>2148</TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "5vmin" }}>macro avg</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.66</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.76</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.59</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>2148</TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "5vmin" }}>weighted avg</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.88</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.61</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.65</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>2148</TableItem>
    </TableRow>
  </TableBody>
</Table>

---

# Secondary model, f1-score is improved:

<Table>
  <TableHeader>
    <TableHeaderItem />
    <TableHeaderItem style={{ fontSize: "5vmin" }}>precision</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "5vmin" }}>recall</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "5vmin" }}>f1-score</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "5vmin" }}>support</TableHeaderItem>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableItem style={{ fontSize: "5vmin" }}>&nbsp;</TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "5vmin" }}>0.0</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.91</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.73</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}><strong>0.81</strong></TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>1756</TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "5vmin" }}>1.0</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.36</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.67</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}><strong>0.47</strong></TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>392</TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "5vmin" }}>&nbsp;</TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "5vmin" }}>accuracy</TableItem>
      <TableItem />
      <TableItem />
      <TableItem style={{ fontSize: "5vmin" }}>0.72</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>2148</TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "5vmin" }}>macro avg</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.63</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.70</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.64</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>2148</TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "5vmin" }}>weighted avg</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.81</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.72</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.75</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>2148</TableItem>
    </TableRow>
  </TableBody>
</Table>

---

# Intuitively, it may be preferable to do nothing (FN), than be exposed to a loss (FP).
## 直感的に、損失（FP）にさらされるよりも、何もしない（FN）方が望ましい場合があります。

---

### Lopez de Prado emphasizes that the primary model need not be an ML model. It could be the decisions of a discretionary trader.
#### プライマリモデルはMLモデルでわなくても良い事を強調されています。プライマリモデルは裁量的トレーダーの取引判断の可能性もあります。


---

<Layout>
  <Fill style={{ margin: "auto" }}>
    <Heading size={5}>He doesn't say it, but the primary model could even be a monkey throwing darts. </Heading>
    <Heading size={5}>彼は言わない事ですけれど、プライマリモデルはダーツを投げる猿の可能性もあります。</Heading>
  </Fill>
  <Fill>
    <Image style={{ borderRadius: "35px" }} src={monkeyThrowDarts} />
  </Fill>
</Layout>

---

# In a recent <Link href="https://time.com/5751190/investing-machine-learning-marcos-de-lopez-prado/">article in Time magazine</Link>, Lopez de Prado states...
## タイム誌の最近の記事で、ロペス・デ・プラドは...次の事を伝えました...

---

# ...[for financial data] ML should be used as a research tool, and not as a forecasting tool.
## [財務データの場合] MLは、予測ツールとしてではなく、調査ツールとして使用するべきです。

---

# This precludes using Amazon Forecast.
## ビットコインの将来の値段を予測してみるためにAmazon Forecastを使用しない方が良いです。

---

# However, let's try anyway.
## しかし、とにかく試してみましょう。

---

# That’s all. Thanks for listening.
## 以上です。ご清聴ありがとうございます。
